(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{414:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"激活事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#激活事件"}},[t._v("#")]),t._v(" 激活事件")]),t._v(" "),s("p",[s("strong",[t._v("激活事件")]),t._v("是在"),s("code",[t._v("package.json")]),t._v("中的"),s("code",[t._v("activationEvents")]),t._v("字段声明的一个JSON对象, 参考"),s("a",{attrs:{href:"/references/extension-manifest"}},[t._v("插件清单")]),t._v(". 当"),s("strong",[t._v("激活事件")]),t._v("触发时, 插件就会被激活. 下面是可用的"),s("strong",[t._v("激活事件")]),t._v("列表:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#onlanguage"}},[t._v("onLanguage")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#oncommand"}},[t._v("onCommand")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#ondebug"}},[t._v("onDebug")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#ondebuginitialconfigurations"}},[t._v("onDebugInitialConfigurations")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#onDebugResolve"}},[t._v("onDebugResolve")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#workspacecontains"}},[t._v("workspaceContains")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#onfilesystem"}},[t._v("onFileSystem")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#onview"}},[t._v("onView")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#onuri"}},[t._v("onUri")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#onwebviewpanel"}},[t._v("onWebviewPanel")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#Start-up"}},[t._v("*")])])]),t._v(" "),s("p",[s("code",[t._v("package.json")]),t._v("的配置项都可以在"),s("a",{attrs:{href:"/references/extension-manifest"}},[t._v("插件清单")]),t._v("中找到.")]),t._v(" "),s("h2",{attrs:{id:"onlanguage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onlanguage"}},[t._v("#")]),t._v(" onLanguage")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("打开特定语言文件时激活事件和相关插件")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onLanguage:python"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n...\n")])])]),s("p",[s("code",[t._v("onLanguage")]),t._v("事件需要指定特定的"),s("a",{attrs:{href:"https://code.visualstudio.com/docs/languages/identifiers",target:"_blank",rel:"noopener noreferrer"}},[t._v("语言标识符"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("也可以添加多种语言:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onLanguage:json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onLanguage:markdown"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onLanguage:typescript"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"oncommand"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oncommand"}},[t._v("#")]),t._v(" onCommand")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("调用命令时激活")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onCommand:extension.sayHello"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n...\n")])])]),s("h2",{attrs:{id:"ondebug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ondebug"}},[t._v("#")]),t._v(" onDebug")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("调试会话(debug session)启动前激活")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onDebug"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n...\n")])])]),s("h3",{attrs:{id:"ondebuginitialconfigurations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ondebuginitialconfigurations"}},[t._v("#")]),t._v(" onDebugInitialConfigurations")]),t._v(" "),s("h3",{attrs:{id:"ondebugresolve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ondebugresolve"}},[t._v("#")]),t._v(" onDebugResolve")]),t._v(" "),s("p",[t._v("这是两个粒度更细的"),s("code",[t._v("onDebug")]),t._v("激活事件:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("DebugConfigurationProvider")]),t._v("中的"),s("code",[t._v("provideDebugConfigurations")]),t._v("在"),s("code",[t._v("onDebugInitialConfigurations")]),t._v("之后触发")]),t._v(" "),s("li",[s("code",[t._v("onDebugResolve:type")]),t._v("在"),s("code",[t._v("DebugConfigurationProvider")]),t._v("的"),s("code",[t._v("resolveDebugConfiguration")]),t._v("方法之前触发.")])]),t._v(" "),s("p",[s("strong",[t._v("友情提示")]),t._v(": 如果调试插件比较轻量, 使用"),s("code",[t._v("onDebug")]),t._v(". 相反, 根据"),s("code",[t._v("DebugConfigurationProvider")]),t._v("实现的对应方法（"),s("code",[t._v("provideDebugConfigurations")]),t._v("或"),s("code",[t._v("resolveDebugConfiguration")]),t._v("），使用"),s("code",[t._v("onDebugInitialConfigurations")]),t._v("或"),s("code",[t._v("onDebugResolve")]),t._v(". 参阅"),s("a",{attrs:{href:"/extension-guides/debugger-extension#using-a-debugconfigurationprovider"}},[t._v("使用调试器插件")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"workspacecontains"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#workspacecontains"}},[t._v("#")]),t._v(" workspaceContains")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("文件夹打开后，且文件夹中至少包含一个符合glob模式的文件时触发.")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"workspaceContains:**/.editorconfig"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"onfilesystem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onfilesystem"}},[t._v("#")]),t._v(" onFileSystem")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("以协议（scheme）打开文件或文件夹时触发。通常是"),s("code",[t._v("file")]),t._v("-协议，也可以用自定义的文件供应器函数替换掉，比如"),s("code",[t._v("ftp")]),t._v("、"),s("code",[t._v("ssh")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onFileSystem:sftp"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n...\n")])])]),s("h2",{attrs:{id:"onview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onview"}},[t._v("#")]),t._v(" onView")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("指定id的视图展开时触发:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onView:nodeDependencies"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n...\n")])])]),s("h2",{attrs:{id:"onuri"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onuri"}},[t._v("#")]),t._v(" onUri")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("插件的系统级URI打开时触发。这个URI协议需要带上"),s("code",[t._v("vscode")]),t._v("或者 "),s("code",[t._v("vscode-insiders")]),t._v("协议。URI主机名必须是插件的唯一标识，剩余的URI是可选的。")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onUri"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n...\n")])])]),s("p",[t._v("如果"),s("code",[t._v("vscode.git")]),t._v("插件定义了"),s("code",[t._v("onUri")]),t._v("激活事件，那么下列任意URI打开时就会触发:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("vscode://vscode.git/init")])]),t._v(" "),s("li",[s("code",[t._v("vscode://vscode.git/clone?url=https%3A%2F%2Fgithub.com%2FMicrosoft%2Fvscode-vsce.git")])]),t._v(" "),s("li",[s("code",[t._v("vscode-insiders://vscode.git/init")]),t._v("(for VS Code Insiders)")])]),t._v(" "),s("h2",{attrs:{id:"onwebviewpanel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onwebviewpanel"}},[t._v("#")]),t._v(" onWebviewPanel")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("VS Code需要恢复匹配到"),s("code",[t._v("viewType")]),t._v("的"),s("code",[t._v("webview")]),t._v("视图时触发.")]),t._v(" "),s("p",[t._v("下面是一个例子:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  ..."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onWebviewPanel:catCoding"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("这会导致插件被激活. 调用"),s("code",[t._v("window.createWebviewPanel")]),t._v("时可以设置"),s("code",[t._v("viewType")]),t._v(", 你可能会需要其它的激活事件(比如: "),s("code",[t._v("onCommand")]),t._v(")来创建"),s("code",[t._v("webview")]),t._v("视图.")]),t._v(" "),s("h2",{attrs:{id:"start-up"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start-up"}},[t._v("#")]),t._v(" Start up")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("当VS Code启动时触发。为了保证良好的用户体验，只在你的插件没有其他任何激活事件的前提下，添加这个激活事件。")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activationEvents"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n...\n")])])]),s("p",[t._v("!> "),s("strong",[t._v("注意")]),t._v(": 一个插件如果侦听了多个激活事件, 那么最好用"),s("code",[t._v('"*"')]),t._v("替换掉.")]),t._v(" "),s("p",[t._v("!> "),s("strong",[t._v("注意")]),t._v(": 插件"),s("strong",[t._v("必须")]),t._v("从它的主模块中输出一个"),s("code",[t._v("activate()")]),t._v("函数，当任意的激活事件触发时，VS Code会"),s("strong",[t._v("仅仅调用一次这个函数")]),t._v("。此外，插件也"),s("strong",[t._v("应该")]),t._v(" 导出一个"),s("code",[t._v("deactivate()")]),t._v("函数，当VS Code关闭时执行清理的任务。如果清理进程是异步的，插件的"),s("code",[t._v("deactivate()")]),s("strong",[t._v("必须")]),t._v("返回一个Promise。如果这个清理任务是同步的，那么"),s("code",[t._v("deactivate()")]),t._v("可以返回"),s("code",[t._v("undefined")]),t._v("。")])])}),[],!1,null,null,null);a.default=n.exports}}]);